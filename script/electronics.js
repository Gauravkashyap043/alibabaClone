let electronicProduct = [
    {
        id : 1,
        productTitle: 'pinhole 1/2.8" cctv lens EFL=1.8mm cctv camera lens wide-angle low distortion',
        price: 685.38,
        qty : 10,
        productImg: [
            "https://sc04.alicdn.com/kf/H64ed7e1732cc415b9f519ec657cb2b28b.jpg",
            "https://sc04.alicdn.com/kf/H6d011b913b6348ae94e727b8b33d26f6C.jpg",
            "https://sc04.alicdn.com/kf/Hfed98582f4d748118f663859b33800c9p.jpg"
        ]
    },
    {
        id : 2,
        productTitle: 'BENRO T980 Aluminum Light Weight Digital Camera Tripod Stand for Photography and Live Broadcast with Carry Bag',
        price: 2804.64,
        qty : 10,
        productImg: [
            "https://sc04.alicdn.com/kf/Hadcb3eb2388342cea3a4899e6e66b9113.jpg",
            "https://sc04.alicdn.com/kf/Hcdd6bd8ce3284a928569ecf22674940cx.jpg",
            "https://sc04.alicdn.com/kf/H08146a4cfc1f4c63adb1a12b52f35a0fI.jpg"
        ]
    },
    {
        id : 3,
        productTitle: 'Newest E99 RC Drones With Camera 720P or 4K hd Camera Wifi FPV Optical Flow Positioning 20mins Flight Foldable Dron',
        price: 846.33,
        qty : 10,
        productImg: [
            "https://sc04.alicdn.com/kf/H86db3d4c5c044e889cdf05a2020ddc932.jpg",
            "https://sc04.alicdn.com/kf/Hebe4154eee8142bda7adee60b56607dej.jpg",
            "https://sc04.alicdn.com/kf/H735e879f8fab4c9092fc53577b3add96B.jpg"
        ]
    },
    {
        id : 4,
        productTitle: '2021 hot selling professional aluminum alloy big camera ball head Panoramic Head tripod ball head for dslr camera',
        price: 3542.38,
        qty : 10,
        productImg: [
            "https://sc04.alicdn.com/kf/H907d9d376f4b429fb625237f5b00d336T.jpg",
            "https://sc04.alicdn.com/kf/H3cdb7bc4578e417896b4b438f7a22581Z.jpg",
            "https://sc04.alicdn.com/kf/Hce06d8d51f1749178755fb105ed944aam.jpg"
        ]
    },
    {
        id : 5,
        productTitle: 'Portable Mini Peripage A9 Max 110mm Blue tooth Wireless Thermal Label Photo Printer',
        price: 4466.48,
        qty : 10,
        productImg: [
            "https://sc04.alicdn.com/kf/Hf471a8e7747847f797ecb32825cfa5a36.jpg",
            "https://sc04.alicdn.com/kf/H43582b53ec064999ac5c8a06866ce939k.jpg",
            "https://sc04.alicdn.com/kf/H6173d084d82249c3a44392fa9c2eb52ap.jpg"
        ]
    },
    {
        id : 6,
        productTitle: 'Global Original Sources camera accessories backpack PULUZ Outdoor Portable Waterproof Dual Shoulders Backpack DSLR Camera Bag',
        price: 762.39,
        qty : 10,
        productImg: [
            "https://sc04.alicdn.com/kf/H83f0de491ffc47f08f96b7d16618c6760.jpg",
            "https://sc04.alicdn.com/kf/Haa4b13988e6941ca9f94b641b49f69653.jpg",
            "https://sc04.alicdn.com/kf/H99f9201cd4144995805c00492e186d30B.jpg"
        ]
    },
    {
        id : 7,
        productTitle: 'Godox V850II 2.4G GN60 Li-ionBattery Camera Flash Speedlite for Canon Nikon Sony',
        price: 6545.70,
        qty : 10,
        productImg: [
            "https://sc04.alicdn.com/kf/H9521395442b84ffc8c0ab8082c05cfccf.jpg",
            "https://sc04.alicdn.com/kf/H22068bb4a376403fbfdc8f9e12ce6a3fC.jpg",
            "https://sc04.alicdn.com/kf/Hf878cfea710a4d8b9df84cc4d84190c73.jpg"
        ]
    },
    {
        id : 8,
        productTitle: '3-in-1 Wide Angle Macro Fisheye Lens Camera Kits Mobile Phone Fish Eye Lenses',
        price: 30.04,
        qty : 10,
        productImg: [
            "https://sc04.alicdn.com/kf/H1472c116665d4397940fdaa6c9817afe6.jpg",
            "https://sc04.alicdn.com/kf/Hb89454fb969648dd9fdd0ff7b3fe6fe9j.jpg",
            "https://sc04.alicdn.com/kf/H4cb751c525bf4f539887ee0d8002f45bA.jpg"
        ]
    },
    {
        id : 9,
        productTitle: 'Camcorder 4K Ultra HD 48MP Video Camera for YouTube Live Streaming 30X Digital Zoom IR Night 3.0 inch Touch Screen',
        price: 15247.63,
        qty : 10,
        productImg: [
            "https://sc04.alicdn.com/kf/Hdf691402b048459cb36281a06c5082f0P.jpg",
            "https://sc04.alicdn.com/kf/Hec84e72787cf45be90de443e4bf077e3I.jpg",
            "https://sc04.alicdn.com/kf/H884ca434d9b74c65a2b84ead5acd4620O.jpg"
        ]
    },
    {
        id : 10,
        productTitle: 'Best Popular kid Gifts Cartoon Small Toy video children fun Camera HD 720p 1080p 4K Kids Digital Camera',
        price: 500.56,
        qty : 10,
        productImg: [
            "https://sc04.alicdn.com/kf/Hf3966634bf7f4a4aa8d07fa595346736Q.jpg",
            "https://sc04.alicdn.com/kf/H1fac224f5e6b40c098d15bcdc9e7ff5fd.jpg",
            "https://sc04.alicdn.com/kf/H8f7eeb3f46ed43f7aba07d648890126dh.jpg"
        ]
    },
    {
        id : 11,
        productTitle: 'AC3 Youtube Live Streaming 4K HD Output Night Vision Professional Digital Video Camera',
        price: 19398.37,
        qty : 10,
        productImg: [
            "https://sc04.alicdn.com/kf/He458d157b21a49799953383b76ed6b46A.png",
            "https://sc04.alicdn.com/kf/H028fff2942fe451ab546c0468556cf680.jpg",
            "https://sc04.alicdn.com/kf/HTB14yqkdrus3KVjSZKbq6xqkFXaM.jpg"
        ]
    },
    {
        id : 12,
        productTitle: 'New Global Drone Brand GD99 racing 360 rolling spinning hand gesture sensing RC stunt car kids toy with remote control',
        price: 1000.34,
        qty : 10,
        productImg: [
            "https://sc04.alicdn.com/kf/Hcad1f2325c464c2a9417f0644bb8d5b0P.jpg",
            "https://sc04.alicdn.com/kf/Ha71701e4367c4a5689f4c1326df63fc4t.jpg",
            "https://sc04.alicdn.com/kf/H00184557affd467c8f467740bf8b9feay.jpg"
        ]
    }
];

function separator(numb) {
    var str = numb.toString().split(".");
    str[0] = str[0].replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    return str.join(".");
}

function displayProducts(data){
    document.querySelector("#electronic").innerHTML = null;

    data.forEach((element)=>{
        let { id, productTitle,price, productImg } = element;
        let card = document.createElement("div");
        card.onclick = ()=>{
            localStorage.setItem("openedProduct",JSON.stringify(element));
            window.location.href = "./openproduct.html";
        };

        let product_img = document.createElement("img");
        product_img.src = productImg[0];

        let product_title = document.createElement("p");
        product_title.textContent = productTitle;

        let product_price = document.createElement("p");
        product_price.textContent = "â‚¹ "+separator(price);

        card.append(product_img,product_title,product_price);
        document.querySelector("#electronic").append(card);
    });
}

async function fetch_data(url) {
    try {
        let response = await fetch(`https://alibaba-backend.herokuapp.com/electronics/${url}`);
        let data = await response.json();
        return data;
    }
    catch (er) {
        console.log({er});
    }
}

// displayProducts(fetch_data("action&sports-camera"));

function showCategory(url){
    fetch_data(url).then((value)=>{
        displayProducts(value);
    });
}
